{"version":3,"sources":["menu.js","personal_contact.js","sideshow.js","utils.js","sw_install.js"],"names":["mainMD","document","getElementById","active","mouseOnMenu","mouseStatus","n","showMenu","classList","add","body","addEventListener","hideMenu","menuItems","getElementsByTagName","i","length","loadAnimation","insertAdjacentHTML","style","filter","remove","removeEventListener","Array","from","getElementsByClassName","forEach","element","window","portraitCards","contact","cardEvent","this","onloadCallback","grecaptcha","render","sitekey","catch","err","mainOld","id","console","log","loadHTMLCode","then","content","innerHTML","uebermittle","getResponse","form","action","actionPHP","submit","border","fullScreen","el","fullScreenImg","disply","src","requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen","e","keyListner","imgs","event","keyCode","getIndex","changeSrc","j","currentSrc","indexOfImages","url","Promise","resolve","reject","xmlhttp","XMLHttpRequest","onreadystatechange","readyState","status","responseText","open","send","target","navigator","serviceWorker","register","registration","warn","pushButton","textContent","setTimeout","d","t","g","s","createElement","parentNode","insertBefore","PushAlertCo","clearPAFirstTime","forceSubscribe"],"mappings":"aAAA,IAAAA,OAAAC,SAAAC,eAAA,UACAC,QAAA,EACAC,aAAA,EAEA,SAAAC,YAAAC,GACAF,YAAAE,EAYA,SAAAC,WACAJ,QAAA,EACAH,OAAAQ,UAAAC,IAAA,YACAR,SAAAS,KAAAC,iBAAA,SAAA,WACAP,aAAAQ,aAGAX,SAAAC,eAAA,QAAAS,iBAAA,QAAAC,UAEA,IADA,IAAAC,EAAAZ,SAAAC,eAAA,UAAAY,qBAAA,MACAC,EAAA,EAAAA,EAAAF,EAAAG,OAAAD,IAEAF,EAAAE,GAAAJ,iBAAA,QAAA,WACAC,aAWA,SAAAK,gBAEAhB,SAAAS,KAAAQ,mBAAA,aAAA,sCAEAjB,SAAAC,eAAA,QAAAiB,MAAAC,OAAA,kBAIA,SAAAR,WACAT,SACAH,OAAAQ,UAAAa,OAAA,YACAlB,QAAA,EACAF,SAAAqB,oBAAA,SAAAV,UACAX,SAAAC,eAAA,QAAAoB,oBAAA,QAAAV,WA5CAW,MAAAC,KAAAvB,SAAAwB,uBAAA,cAAAC,QAAA,SAAAC,GACAA,EAAAhB,iBAAA,QAAAJ,YAIAN,SAAAC,eAAA,SAAAS,iBAAA,QAAAJ,UAuBAqB,OAAAjB,iBAAA,eAAAM,eCnCA,IAFA,IAAAY,cAAA5B,SAAAwB,uBAAA,eAEAV,EAAA,EAAAA,EAAAc,cAAAb,OAAAD,IAAA,CACA,IAAAe,QAAAD,cAAAd,GACAe,QAAAnB,iBAAA,QAAA,WACAoB,UAAAC,QAIA,IAAAC,eAAA,WACAC,WAAAC,OAAA,YAAA,CACAC,QAAA,6CACAC,MAAA,SAAAC,OAIAC,QAAA,GAEA,SAAAR,UAAAD,GAEA,MAAAA,EAAAU,KACAC,QAAAC,IAAAZ,EAAAU,IAGAG,aAAA,+BAAAC,KAAA,SAAAC,GAGAN,QAAAtC,SAAAC,eAAA,QAAA4C,UAKA7C,SAAAC,eAAA,QAAA4C,UAAAD,EAEAZ,iBAIAhC,SAAAC,eAAA,sBASA,SAAA6C,cACA,IAAAb,WAAAc,cAAAhC,QACAiC,KAAAC,OAAAC,UACAF,KAAAG,UAEAnD,SAAAC,eAAA,aAAAY,qBAAA,UAAA,GAAAK,MAAAkC,OAAA,oBCpDA,SAAAC,WAAAC,GAEAC,cAAArC,MAAAsC,OAAA,QAEAD,cAAAE,IAAAH,EAAAG,IAEAF,cAAAG,kBACAH,cAAAG,oBACAH,cAAAI,wBACAJ,cAAAI,0BACAJ,cAAAK,qBACAL,cAAAK,uBACAL,cAAAM,qBACAN,cAAAM,sBAGA7D,SAAAU,iBAAA,UAAA,SAAAoD,GACAC,WAAAD,KAKA9D,SAAAS,KAAAQ,mBAAA,aAAA,8EACA,IAAAsC,cAAAvD,SAAAC,eAAA,iBAEA+D,KAAAhE,SAAAwB,uBAAA,cAQA,SAAAuC,WAAAE,GACA,GAAA,IAAAA,EAAAC,QAAA,CACA,IAAApD,EAAAqD,WACA3B,QAAAC,IAAA3B,GACAA,EAAAkD,KAAAjD,OAAA,EAAAqD,UAAAtD,EAAA,GACAsD,UAAA,QAEA,GAAA,IAAAH,EAAAC,QAAA,CAEAE,UAAA,GADAtD,EAAAqD,YACArD,EAAA,EACAkD,KAAAjD,OAAA,IAKA,SAAAoD,WACA,IAAA,IAAAE,EAAA,EAAAA,EAAAL,KAAAjD,OAAAsD,IACA,GAAAL,KAAAK,GAAAC,YAAAf,cAAAE,IAAA,OAAAY,EAGA,SAAAD,UAAAG,GAEAhB,cAAAE,IAAAO,KAAAO,GAAAD,WCvDA,SAAA5B,aAAA8B,GACA,OAAA,IAAAC,QAAA,SAAAC,EAAAC,GACA,IAAAC,EAAA,IAAAC,eACAD,EAAAE,mBAAA,WACA,GAAA/C,KAAAgD,YAAA,KAAAhD,KAAAiD,QACAN,EAAA3C,KAAAkD,eAGAL,EAAAM,KAAA,MAAAV,GAAA,GACAI,EAAAO,SDiBA7D,MAAAC,KAAAyC,MAAAvC,QAAA,SAAA6B,GACAA,EAAA5C,iBAAA,QAAA,SAAAoD,GACAT,WAAAS,EAAAsB,YE3BA,kBAAAC,WAAA,gBAAA1D,QACAa,QAAAC,IAAA,uDAEAd,OAAAjB,iBAAA,OAAA,WACA2E,UAAAC,cAAAC,SAAA,UACA5C,KAAA,SAAA6C,GACAhD,QAAAC,IAAA,4CAAA+C,IACA,SAAAnD,GACAG,QAAAC,IAAA,wCAAAJ,SAKAG,QAAAiD,KAAA,mDACAC,WAAAC,YAAA,sCAKAC,WAAA,WACA,IAAAC,EAAAC,EACAC,EACAC,EAFAH,EAKA7F,SALA8F,EAKA,SAJAC,EAAAF,EAAAI,cAAAH,GACAE,EAAAH,EAAAhF,qBAAAiF,GAAA,GACAC,EAAAtC,IAAA,yEACAuC,EAAAE,WAAAC,aAAAJ,EAAAC,GAEAJ,WAAA,WACAQ,YAAAC,kBAAA,GACAD,YAAAE,kBACA,MACA9D,QAAAC,IAAA,oCACA","file":"global.min.js","sourcesContent":["var mainMD = document.getElementById(\"mainMD\");\r\nvar active = false;\r\nvar mouseOnMenu = false;\r\n\r\nfunction mouseStatus(n) {\r\n  mouseOnMenu = n;\r\n}\r\n\r\n// Menu klappt aus, wenn Elemente per Tap fokusiert werden... (Aufruf der Funktion)\r\nArray.from(document.getElementsByClassName(\"focusable\")).forEach(function(element) {\r\n  element.addEventListener('focus', showMenu);\r\n});\r\n\r\n// Menu klappt aus bei Klick auf Menu-Item (Aufruf der Funktion)\r\ndocument.getElementById('mainM').addEventListener('click', showMenu);\r\n\r\n// Menu wird sichtbar\r\nfunction showMenu() {\r\n  active = true;\r\n  mainMD.classList.add(\"showMenu\");\r\n  document.body.addEventListener(\"scroll\", function() {\r\n    if (!mouseOnMenu) hideMenu();\r\n\r\n  });\r\n  document.getElementById('main').addEventListener('click', hideMenu);\r\n  var menuItems = document.getElementById('mainMD').getElementsByTagName(\"li\");\r\n  for (var i = 0; i < menuItems.length; i++) {\r\n    // console.log('Registrate ClickListener'); // Check als Consolen-Log\r\n    menuItems[i].addEventListener('click', function() {\r\n      hideMenu();\r\n      // loadAnimation(); // Backup falls beforeunload nicht funktioniert\r\n    });\r\n  }\r\n}\r\n\r\n\r\n// Falls eine neue Seite geladen wird... soll die Ladeanimation abgespielt werden...\r\nwindow.addEventListener('beforeunload', loadAnimation);\r\n\r\n// Für die Ladeanimation\r\nfunction loadAnimation() {\r\n  // Drehender Kreis\r\n  document.body.insertAdjacentHTML('afterbegin', '<div id=\"loader\"><div></div></div>');\r\n  // alter Seiteninhalt wird s/w\r\n  document.getElementById('main').style.filter = \"grayscale(100%)\";\r\n}\r\n\r\n// Menu wird unsichtbar\r\nfunction hideMenu() {\r\n  if (active) {\r\n    mainMD.classList.remove(\"showMenu\");\r\n    active = false;\r\n    document.removeEventListener(\"scroll\", hideMenu);\r\n    document.getElementById('main').removeEventListener('click', hideMenu);\r\n\r\n  }\r\n}\r\n","var portraitCards = document.getElementsByClassName('contactable');\r\n\r\nfor (var i = 0; i < portraitCards.length; i++) {\r\n  var contact = portraitCards[i];\r\n  contact.addEventListener(\"click\", function() {\r\n    cardEvent(this);\r\n  });\r\n}\r\n\r\nvar onloadCallback = function() {\r\n  grecaptcha.render('reCaptcha', {\r\n    'sitekey': '6LegdCkTAAAAANnQ7DNBVr7TxPgLM1wXeFrkNOhn'\r\n  }).catch((err) => {});\r\n};\r\n\r\n\r\nvar mainOld = \"\";\r\n\r\nfunction cardEvent(contact) {\r\n\r\n  if (contact.id != null) {\r\n    console.log(contact.id);\r\n\r\n    // Ladet den HTML Code für das Kontaktformular\r\n    loadHTMLCode('/form/personal_contact.html').then(content => {\r\n\r\n\r\n      mainOld = document.getElementById('main').innerHTML;\r\n\r\n      //  document.getElementsByTagName(\"html\")[0].overflow = \"hidden\";\r\n\r\n      // Content wird angezeogt\r\n      document.getElementById('main').innerHTML = content;\r\n\r\n      onloadCallback();\r\n\r\n      // script für POST\r\n      var actionPHP = \"https://zh11.ch/form/webmaster.php\";\r\n      var form = document.getElementById(\"kontaktformular\");\r\n\r\n\r\n    });\r\n  }\r\n\r\n}\r\n\r\n\r\nfunction uebermittle() {\r\n  if (grecaptcha.getResponse().length !== 0) {\r\n    form.action = actionPHP;\r\n    form.submit();\r\n  } else {\r\n    document.getElementById(\"reCaptcha\").getElementsByTagName(\"iframe\")[0].style.border = \"1px solid #dd4b39\";\r\n  }\r\n}\r\n","function fullScreen(el) {\r\n\r\n    fullScreenImg.style.disply = \"block\";\r\n\r\n    fullScreenImg.src = el.src;\r\n\r\n    if (fullScreenImg.requestFullscreen) {\r\n        fullScreenImg.requestFullscreen();\r\n    } else if (fullScreenImg.webkitRequestFullscreen) {\r\n        fullScreenImg.webkitRequestFullscreen();\r\n    } else if (fullScreenImg.mozRequestFullScreen) {\r\n        fullScreenImg.mozRequestFullScreen();\r\n    } else if (fullScreenImg.msRequestFullscreen) {\r\n        fullScreenImg.msRequestFullscreen();\r\n    }\r\n\r\n    document.addEventListener('keydown', function(e) {\r\n        keyListner(e);\r\n    });\r\n\r\n}\r\n\r\ndocument.body.insertAdjacentHTML('afterbegin', '<img alt=\"Cevi Züri 11 - Vollbild\" style=\"height: 0\" id=\"fullScreenImg\" />');\r\nvar fullScreenImg = document.getElementById('fullScreenImg');\r\n\r\nvar imgs = document.getElementsByClassName('fullscreen');\r\nArray.from(imgs).forEach((el) => {\r\n    el.addEventListener('click', function(e) {\r\n        fullScreen(e.target);\r\n    });\r\n\r\n});\r\n\r\nfunction keyListner(event) {\r\n    if (event.keyCode == 39) {\r\n        var i = getIndex();\r\n        console.log(i);\r\n        if (i < imgs.length - 1) changeSrc(i + 1)\r\n        else changeSrc(0);\r\n\r\n    } else if (event.keyCode == 37) {\r\n        var i = getIndex();\r\n        if (i > 0) changeSrc(i - 1);\r\n        else changeSrc(imgs.length - 1);\r\n\r\n    }\r\n}\r\n\r\nfunction getIndex() {\r\n    for (var j = 0; j < imgs.length; j++)\r\n        if (imgs[j].currentSrc == fullScreenImg.src) return j\r\n}\r\n\r\nfunction changeSrc(indexOfImages) {\r\n    //imgs[indexOfImages].currentSrc;\r\n    fullScreenImg.src = imgs[indexOfImages].currentSrc;\r\n}\r\n","function loadHTMLCode(url) {\r\n  return new Promise((resolve, reject) => {\r\n    var xmlhttp = new XMLHttpRequest();\r\n    xmlhttp.onreadystatechange = function() {\r\n      if (this.readyState == 4 && this.status == 200) {\r\n        resolve(this.responseText);\r\n      }\r\n    };\r\n    xmlhttp.open(\"GET\", url, true);\r\n    xmlhttp.send();\r\n  });\r\n}\r\n","// Install Service Worker and PushManager\r\nif ('serviceWorker' in navigator && 'PushManager' in window) {\r\n    console.log('[ServiceWorker] ServiceWorker and Push is supported');\r\n\r\n    window.addEventListener('load', function() {\r\n        navigator.serviceWorker.register('/sw.js')\r\n            .then(function(registration) {\r\n                console.log('[ServiceWorker] Registration successful: ', registration);\r\n            }, function(err) {\r\n                console.log('[ServiceWorker] Registration failed: ', err);\r\n            });\r\n    });\r\n\r\n} else {\r\n    console.warn('[ServiceWorker] Push messaging is not supported');\r\n    pushButton.textContent = '[ServiceWorker] Push Not Supported';\r\n}\r\n\r\n\r\n// Suscribe for Push-UP's ask for after 10s\r\nsetTimeout(function() {\r\n    (function(d, t) {\r\n        var g = d.createElement(t),\r\n            s = d.getElementsByTagName(t)[0];\r\n        g.src = \"https://cdn.pushalert.co/integrate_3c3b7df02e6f9cccf523640784ef0104.js\";\r\n        s.parentNode.insertBefore(g, s);\r\n    }(document, \"script\"));\r\n    setTimeout(function() {\r\n        PushAlertCo.clearPAFirstTime(false);\r\n        PushAlertCo.forceSubscribe();\r\n    }, 2500);\r\n    console.log('[Push Notification] Registrated');\r\n}, 10000);\r\n\r\n\r\n// Zeigt eine Benachrichtigung an\r\n/* function showNotification(message) {\r\n    if (Notification.permission === 'granted') {\r\n        navigator.serviceWorker.getRegistration()\r\n            .then(function(reg) {\r\n                var options = {\r\n                    body: message,\r\n                    icon: 'templates/zh11/res/logos/logo.png',\r\n                    vibrate: [100, 50, 100],\r\n                    data: {\r\n                        primaryKey: 1\r\n                    },\r\n                    actions: [{\r\n                        action: 'explore',\r\n                        title: 'Zur Webseite'\r\n                    }]\r\n                };\r\n                reg.showNotification('Cevi Züri 11', options);\r\n            });\r\n    }\r\n}\r\n*/\r\n"]}